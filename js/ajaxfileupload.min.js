jQuery.extend({handleError:function(a,c,b,d){a.error&&a.error.call(a.context||a,c,b,d);a.global&&(a.context?jQuery(a.context):jQuery.event).trigger("ajaxError",[c,a,d])},httpData:function(a,c,b){var d=a.getResponseHeader("content-type");a=(d="xml"==c||!c&&d&&0<=d.indexOf("xml"))?a.responseXML:a.responseText;if(d&&"parsererror"==a.documentElement.tagName)throw"parsererror";b&&b.dataFilter&&(a=b.dataFilter(a,c));"string"===typeof a&&("script"==c&&jQuery.globalEval(a),"json"==c&&(a=window.eval("("+a+")")));return a},createUploadIframe:function(a,c){var b="jUploadFrame"+a;if(window.ActiveXObject){var d=document.createElement('\x3ciframe id\x3d"'+b+'" name\x3d"'+b+'" /\x3e');"boolean"==typeof c?d.src="javascript:false":"string"==typeof c&&(d.src=c)}else d=document.createElement("iframe"),d.id=b,d.name=b;d.style.position="absolute";d.style.top="-1000px";d.style.left="-1000px";document.body.appendChild(d);return d},createUploadForm:function(a,c){var b="jUploadForm"+a,d="jUploadFile"+a,b=$('\x3cform  action\x3d"" method\x3d"POST" name\x3d"'+b+'" id\x3d"'+b+'" enctype\x3d"multipart/form-data"\x3e\x3c/form\x3e'),g=$("#"+c),e=$(g).clone();$(g).attr("id",d);$(g).before(e);$(g).appendTo(b);$(b).css("position","absolute");$(b).css("top","-1200px");$(b).css("left","-1200px");$(b).appendTo("body");return b},ajaxFileUpload:function(a){a=jQuery.extend({},jQuery.ajaxSettings,a);var c=a.fileElementId,b=jQuery.createUploadForm(c,a.fileElementId);jQuery.createUploadIframe(c,a.secureuri);var d="jUploadFrame"+c,c="jUploadForm"+c;a.global&&!jQuery.active++&&jQuery.event.trigger("ajaxStart");var g=!1,e={};a.global&&jQuery.event.trigger("ajaxSend",[e,a]);var k=function(c){var f=document.getElementById(d);try{f.contentWindow?(e.responseText=f.contentWindow.document.body?f.contentWindow.document.body.innerHTML:null,e.responseXML=f.contentWindow.document.XMLDocument?f.contentWindow.document.XMLDocument:f.contentWindow.document):f.contentDocument&&(e.responseText=f.contentDocument.document.body?f.contentDocument.document.body.innerHTML:null,e.responseXML=f.contentDocument.document.XMLDocument?f.contentDocument.document.XMLDocument:f.contentDocument.document)}catch(l){jQuery.handleError(a,e,null,l)}if(e||"timeout"==c){g=!0;var h;try{if(h="timeout"!=c?"success":"error","error"!=h){var k=jQuery.uploadHttpData(e,a.dataType);a.success&&a.success(k,h);a.global&&jQuery.event.trigger("ajaxSuccess",[e,a])}else jQuery.handleError(a,e,h)}catch(l){h="error",jQuery.handleError(a,e,h,l)}a.global&&jQuery.event.trigger("ajaxComplete",[e,a]);a.global&&!--jQuery.active&&jQuery.event.trigger("ajaxStop");a.complete&&a.complete(e,h);jQuery(f).unbind();setTimeout(function(){try{$(f).remove(),$(b).remove()}catch(c){jQuery.handleError(a,e,null,c)}},100);e=null}};0<a.timeout&&setTimeout(function(){g||k("timeout")},a.timeout);try{b=$("#"+c),$(b).attr("action",a.url),$(b).attr("method","POST"),$(b).attr("target",d),b.encoding?b.encoding="multipart/form-data":b.enctype="multipart/form-data",$(b).submit()}catch(m){jQuery.handleError(a,e,null,m)}window.attachEvent?document.getElementById(d).attachEvent("onload",k):document.getElementById(d).addEventListener("load",k,!1);return{abort:function(){}}},uploadHttpData:function(a,c){var b;b="xml"!=c&&c?a.responseText:a.responseXML;"script"==c&&jQuery.globalEval(b);"json"==c&&eval("data \x3d "+b);"html"==c&&jQuery("\x3cdiv\x3e").html(b).evalScripts();return b}});