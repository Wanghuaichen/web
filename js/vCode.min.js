/**
 * Created by admin on 2015/10/13.
 */(function(){var e=function(a){return{str:"abcdefghijklmopqrstxuvyzwn0123456789".split(""),randint:function(a,b){return Math.floor(Math.random()*(b-a+1)+a)},randStr:function(){var a=this.randint(0,this.str.length-1);return this.str[a]},create:function(a){a=a||10;for(var b="",c=0;c<a;c++)b+=this.randStr();return b}}.create(a?a:10)},b=function(a,b){return Math.floor(Math.random()*(b-a+1)+a)},c=function(a,b){this.codeDoms=[];this.lineDoms=[];this.initOptions(b);this.dom=a;this.init();this.addEvent();this.update();this.mask()};c.prototype.init=function(){this.dom.style.position="relative";this.dom.style.overflow="hidden";this.dom.style.cursor="pointer";this.dom.title="\u70b9\u51fb\u66f4\u6362\u9a8c\u8bc1\u7801";this.dom.style.background=this.options.bgColor;this.w=this.dom.clientWidth;this.h=this.dom.clientHeight;this.uW=this.w/this.options.len};c.prototype.mask=function(){var a=document.createElement("div");a.style.cssText="width: 100%;height: 100%;left: 0;top: 0;position: absolute;cursor: pointer;z-index: 9999999";a.title="\u70b9\u51fb\u66f4\u6362\u9a8c\u8bc1\u7801";this.dom.appendChild(a)};c.prototype.addEvent=function(){var a=this;a.dom.addEventListener("click",function(){a.update.call(a)})};c.prototype.initOptions=function(a){this.options=new function(){this.len=4;this.fontSizeMin=20;this.fontSizeMax=48;this.colors="green red blue #53da33 #AA0000 #FFBB00".split(" ");this.bgColor="#FFF";this.fonts="Times New Roman;Georgia;Serif;sans-serif;arial;tahoma;Hiragino Sans GB".split(";");this.lines=8;this.lineColors=["#888888","#FF7744","#888800","#008888"];this.lineHeightMin=1;this.lineHeightMax=3;this.lineWidthMin=1;this.lineWidthMax=60};if("object"===typeof a)for(i in a)this.options[i]=a[i]};c.prototype.update=function(){for(var a=0;a<this.codeDoms.length;a++)this.dom.removeChild(this.codeDoms[a]);for(a=0;a<this.lineDoms.length;a++)this.dom.removeChild(this.lineDoms[a]);this.createCode();this.draw()};c.prototype.createCode=function(){this.code=e(this.options.len)};c.prototype.verify=function(a){return this.code===a};c.prototype.draw=function(){this.codeDoms=[];for(var a=0;a<this.code.length;a++)this.codeDoms.push(this.drawCode(this.code[a],a));this.drawLines()};c.prototype.drawCode=function(a,c){var d=document.createElement("span");d.style.cssText=["font-size:"+b(this.options.fontSizeMin,this.options.fontSizeMax)+"px","color:"+this.options.colors[b(0,this.options.colors.length-1)],"position: absolute","left:"+b(this.uW*c,this.uW*c+this.uW-10)+"px","top:"+b(0,this.h-30)+"px","transform:rotate("+b(-30,30)+"deg)","-ms-transform:rotate("+b(-30,30)+"deg)","-moz-transform:rotate("+b(-30,30)+"deg)","-webkit-transform:rotate("+b(-30,30)+"deg)","-o-transform:rotate("+b(-30,30)+"deg)","font-family:"+this.options.fonts[b(0,this.options.fonts.length-1)],"font-weight:"+b(400,900)].join(";");d.innerHTML=a;this.dom.appendChild(d);return d};c.prototype.drawLines=function(){this.lineDoms=[];for(var a=0;a<this.options.lines;a++){var c=document.createElement("div");c.style.cssText=["position: absolute","opacity: "+b(3,8)/10,"width:"+b(this.options.lineWidthMin,this.options.lineWidthMax)+"px","height:"+b(this.options.lineHeightMin,this.options.lineHeightMax)+"px","background: "+this.options.lineColors[b(0,this.options.lineColors.length-1)],"left:"+b(0,this.w-20)+"px","top:"+b(0,this.h)+"px","transform:rotate("+b(-30,30)+"deg)","-ms-transform:rotate("+b(-30,30)+"deg)","-moz-transform:rotate("+b(-30,30)+"deg)","-webkit-transform:rotate("+b(-30,30)+"deg)","-o-transform:rotate("+b(-30,30)+"deg)","font-family:"+this.options.fonts[b(0,this.options.fonts.length-1)],"font-weight:"+b(400,900)].join(";");this.dom.appendChild(c);this.lineDoms.push(c)}};this.vCode=c}).call(this);